# 跨账号API访问

当其他UCloud账号向您申请通过API访问资源权限时，您可以通过【角色】+【STS】功能为其分配权限。其访问范围 (如：项目范围、产品范围等) 由您赋予的角色所决定。

## 适用场景
您可以通过跨账号访问角色生成的临时安全密钥使您的其它UCloud账号扮UCloud已有账号的角色，在权限范围内管理资源。

## 前提条件
拥有多个UCloud主账号。本文档中假设拥有两个UCloud账号 A 即授信方、B 即访问方，假设 B 账号想管理账号 A 下的资源。


## 操作步骤
1. 授信方创建角色
   - 使用A的主账号登录控制台，进入【访问控制】->【角色管理】
   - 创建自定义角色
   - 点击对应角色详情，为角色添加可操作的功能以及资源范围权限



2. 授信方在角色的信任策略内添加访问方

   - 点击对应角色的“详情”按钮，选择“信任策略”，点击“编辑策略”
   - 添加访问方的账号即Company ID至“Principal“内，点击确定



3. 使用方创建子用户并添加可调用STS生成临时安全密钥的权限

   - 使用B的主账号登录控制台，进入【访问控制】->【用户管理】，邀请子用户
   - 点击对应子用户的添加权限按钮
   - 搜索“STSCreateOnlyAccess”策略，进行添加


4. 使用方调用STS生成临时安全密钥
STS获取扮演角色的临时身份凭证 - AssumeRole API说明文档可查看：https://docs.ucloud.cn/api/sts-api/assume_role。
需要拿到以下三个信息：
   - SecurityToken：安全令牌
   - AccessKeyId：密钥ID
   - AccessKeySecret：密钥Secret

6. 使用步骤4生成的临时安全密钥扮演账号 A 授权的角色，在角色的权限范围内可以通过以下方式中的任意一种，调用您需要的接口管理UCloud资源：
   - 多语言 OpenSDK / Go / Python /
   - UAPI 浏览器
   - CloudShell 云命令行
  
SDK示例



